# –í–∏–¥–µ–æ –°–±–æ—Ä–∫–∞ - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –§–∏–∫—Å—ã

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. FFmpeg WASM –∑–∞–≥—Ä—É–∑–∫–∞
- **–ü—Ä–æ–±–ª–µ–º–∞:** FFmpeg –Ω–µ –∑–∞–≥—Ä—É–∂–∞–ª—Å—è –±–µ–∑ CDN URL
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ CDN URL –¥–ª—è core/wasm —Ñ–∞–π–ª–æ–≤
- **–§–∞–π–ª:** `services/videoService.ts:29-33`

### 2. –†–µ–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—É–¥–∏–æ
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–ª–∞–≤—ã –±—ã–ª–∞ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–∞ = 30—Å–µ–∫
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getAudioDuration()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∞–ª—å–Ω–æ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–§–∞–π–ª:** `services/videoService.ts:8-21, 115-130`

### 3. CORS –¥–ª—è Stock Photos
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è Unsplash/Pexels –Ω–µ –≥—Ä—É–∑–∏–ª–∏—Å—å –≤ Canvas
- **–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞–Ω API proxy –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- **–§–∞–π–ª—ã:** `dev-server.js`, `services/videoService.ts:79-85`, `services/apiUtils.ts:101-108`

### 4. UTF-8 —Å—É–±—Ç–∏—Ç—Ä—ã
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ò–µ—Ä–æ–≥–ª–∏—Ñ—ã –≤ SRT —Ñ–∞–π–ª–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ:** –£–ª—É—á—à–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `cleanSubtitleText()` —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∑–∞–º–µ–Ω–∞–º–∏
- **–§–∞–π–ª:** `services/chapterPackager.ts:428-449`

### 5. TypeScript –æ—à–∏–±–∫–∏
- **–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–º–ø–æ—Ä—Ç—ã –∏ —Ç–∏–ø—ã –≤ —Ç–µ—Å—Ç–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ —Ç–∏–ø—ã –∏ –∏–º–ø–æ—Ä—Ç—ã
- **–§–∞–π–ª—ã:** `components/PodcastStudio.tsx`, `services/aiTextService.ts`, `test/*.ts`

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install
```

### –ó–∞–ø—É—Å–∫ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ Vite (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π API —Å–µ—Ä–≤–µ—Ä)
npm run dev

# –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 3001
npm run dev:api

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
npm run dev:full
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ—Ä—Ç–æ–≤
- **Vite Frontend:** http://localhost:3000
- **API Server:** http://localhost:3001
- **API Endpoints:**
  - `GET /api/audio-proxy?url=<encoded_url>` - –¥–ª—è SFX –∞—É–¥–∏–æ
  - `GET /api/image-proxy?url=<encoded_url>` - –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  - `POST /api/download-image` - –¥–ª—è base64 –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏

## üì¶ –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ –ë—Ä–∞—É–∑–µ—Ä–Ω–∞—è —Å–±–æ—Ä–∫–∞ –≤–∏–¥–µ–æ
- FFmpeg –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å CDN
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥—Ä—É–∑—è—Ç—Å—è —á–µ—Ä–µ–∑ proxy
- –†–µ–∞–ª—å–Ω–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∞—É–¥–∏–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∞–π–º–∏–Ω–≥–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

### ‚úÖ ZIP –∞—Ä—Ö–∏–≤—ã
- Chapters —Å —Ñ–∞–π–ª–∞–º–∏: audio.wav, images/, sfx/, music.wav
- metadata.json —Å sfxTimings
- subtitles.srt —Å UTF-8 –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
- YouTube thumbnails
- assemble_video.bat —Å–∫—Ä–∏–ø—Ç
- youtube_upload_info.txt

### ‚úÖ Windows —Å–±–æ—Ä–∫–∞ —á–µ—Ä–µ–∑ .bat
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- –†–∞—Å—á–µ—Ç –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ —Ä–µ–∞–ª—å–Ω–æ–π –∞—É–¥–∏–æ
- SFX —Å —Ç–∞–π–º–∏–Ω–≥–∞–º–∏ –∏–∑ metadata.json
- –ú—É–∑—ã–∫–∞ —Å fade-out
- –°—É–±—Ç–∏—Ç—Ä—ã —Å UTF-8
- –ö–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏—è –≥–ª–∞–≤ –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript
```bash
npx tsc --noEmit
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–±–æ—Ä–∫–∏
```bash
npm run build
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
```bash
npm test
```

## üìù Checklist –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (`npm install`)
- [ ] TypeScript –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
- [ ] Vite dev —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3000
- [ ] FFmpeg —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ (–¥–ª—è .bat —Å–∫—Ä–∏–ø—Ç–∞)
- [ ] –î–æ—Å—Ç—É–ø–µ–Ω –∏–Ω—Ç–µ—Ä–Ω–µ—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ–¥–∏–∞

## üîß –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### services/videoService.ts
```typescript
// –ë—ã–ª–æ:
await ffmpeg.load();

// –°—Ç–∞–ª–æ:
const baseURL = 'https://unpkg.com/@ffmpeg/core@0.12.6/dist/umd';
await ffmpeg.load({
    coreURL: await toBlobURL(`${baseURL}/ffmpeg-core.js`, 'text/javascript'),
    wasmURL: await toBlobURL(`${baseURL}/ffmpeg-core.wasm`, 'application/wasm'),
});
```

### services/videoService.ts (audio duration)
```typescript
// –ë—ã–ª–æ:
const audioDuration = 30; // Default estimate

// –°—Ç–∞–ª–æ:
const audioDuration = await getAudioDuration(chapter.audioBlob);
```

### services/videoService.ts (CORS proxy)
```typescript
// –ë—ã–ª–æ:
const response = await fetch(img.url);

// –°—Ç–∞–ª–æ:
const proxyUrl = `/api/image-proxy?url=${encodeURIComponent(img.url)}`;
const response = await fetch(proxyUrl);
```

### package.json (–Ω–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã)
```json
{
  "scripts": {
    "dev": "vite",
    "dev:api": "node dev-server.js",
    "dev:full": "concurrently \"npm run dev:api\" \"npm run dev\"",
    "build": "vite build",
    "preview": "vite preview",
    "test": "jest"
  }
}
```

–¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã.